<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="小武子博客">
<meta property="og:url" content="http://blog.xiaowuzi.info/index.html">
<meta property="og:site_name" content="小武子博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小武子博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://blog.xiaowuzi.info/">





  <title>小武子博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小武子博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.xiaowuzi.info/2018/04/07/前端常见算法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tony">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小武子博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/07/前端常见算法/" itemprop="url">前端常见算法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-07T21:11:35+08:00">
                2018-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h2><ul>
<li>数组去复</li>
<li>计算数组中每个元素出现的次数</li>
<li>JS找出数组 arr 中重复出现过的元素</li>
<li>统计一个字符串中出现最多的字母</li>
<li>字符串回文判断(回文是指把相同的词汇或句子，在下文中调换位置或颠倒过来，产生首尾回环的情趣，叫做回文，也叫回环。)</li>
<li>不利用第三方变量的情况下交换两个变量的值</li>
</ul>
<h3 id="数组去重复"><a href="#数组去重复" class="headerlink" title="数组去重复"></a>数组去重复</h3><p>方法一 正常思维<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var array=[1,1,&apos;1&apos;];</span><br><span class="line"></span><br><span class="line">function unique(array)&#123;</span><br><span class="line">    var res=[];</span><br><span class="line">    for(var i=0,len=array.length;i&lt;len;i++)&#123;</span><br><span class="line">        var current=array[i];</span><br><span class="line">        if(res.indexOf(current)===-1) res.push(current);</span><br><span class="line">    &#125;</span><br><span class="line">    return res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(unique(array));</span><br></pre></td></tr></table></figure></p>
<p>方法二、利用filter</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var array=[1,2,1,1,&apos;1&apos;];</span><br><span class="line"></span><br><span class="line">function unique(array)&#123;</span><br><span class="line">    var res=array.filter(function(item,index,array)&#123;</span><br><span class="line">        return array.indexOf(item)===index;</span><br><span class="line">    &#125;);</span><br><span class="line">    return res;</span><br><span class="line">&#125;</span><br><span class="line">console.log(unique(array));</span><br></pre></td></tr></table></figure>
<p>方法三、使用reduce</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var arr=[1,2,1,2,3,5,4,5,3,4,4,4,4];</span><br><span class="line">function unique()&#123;</span><br><span class="line">    var result=arr.sort().reduce((init,current)=&gt;&#123;</span><br><span class="line">        if(init.length===0 || init[init,length-1])&#123;</span><br><span class="line">            init.push(current);</span><br><span class="line">        &#125;</span><br><span class="line">        return init;</span><br><span class="line">    &#125;,[]);</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line">console.log(unique(arr));</span><br></pre></td></tr></table></figure>
<h3 id="计算数组中每个元素出现的次数"><a href="#计算数组中每个元素出现的次数" class="headerlink" title="计算数组中每个元素出现的次数"></a>计算数组中每个元素出现的次数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var names=[&apos;Alice&apos;,&apos;Bob&apos;,&apos;Iiff&apos;,&apos;Bruce&apos;,&apos;Alice&apos;];</span><br><span class="line"></span><br><span class="line">var countedNames=names.reduce(function(allNames,name)&#123;</span><br><span class="line">    if(name in allNames)&#123;</span><br><span class="line">        allNames[name]++;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        allNames[name]=1;</span><br><span class="line">    &#125;</span><br><span class="line">    return allNames;</span><br><span class="line">&#125;,&#123;&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="JS找出数组-arr-中重复出现过的元素"><a href="#JS找出数组-arr-中重复出现过的元素" class="headerlink" title="JS找出数组 arr 中重复出现过的元素"></a>JS找出数组 arr 中重复出现过的元素</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var str1 = &quot;jhadfgskjfajhdewqe&quot;;</span><br><span class="line">var arr1=str1.split(&apos;&apos;);</span><br><span class="line">var result=arr1.reduce(function(arr2,current)&#123;</span><br><span class="line">	if(arr1.indexOf(current)&gt;-1 &amp;&amp; ((arr2.length===0) || (arr2.length !==0 &amp;&amp; arr2.indexOf(current)===-1))) arr2.push(current);</span><br><span class="line">	return arr2;</span><br><span class="line">&#125;,[]);</span><br><span class="line">console.log(str1);</span><br></pre></td></tr></table></figure>
<h3 id="统计一个字符串中出现最多的字母"><a href="#统计一个字符串中出现最多的字母" class="headerlink" title="统计一个字符串中出现最多的字母"></a>统计一个字符串中出现最多的字母</h3><p>方法一</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var str1 = &quot;jhadfgskjfajhdewqe&quot;;  </span><br><span class="line">    var arr1 = str1.split(&apos;&apos;);  </span><br><span class="line">    console.log(arr1);  </span><br><span class="line">    function MostUnit()&#123;  </span><br><span class="line">        var arrA = [];  </span><br><span class="line">        var arrB = [];  </span><br><span class="line">        for(var i = 0 ;i &lt;arr1.length; i ++)&#123;  </span><br><span class="line">            if(arrA.indexOf(arr1[i])==-1)&#123;  </span><br><span class="line">                arrA.push(arr1[i]);  </span><br><span class="line">                arrB.push(1);  </span><br><span class="line">            &#125;else &#123;  </span><br><span class="line">                arrB[arrA.indexOf(arr1[i])] ++;  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">        console.log(arrB)  </span><br><span class="line">        console.log(arrA[arrB.indexOf(Math.max.apply(Math,arrB))]);  </span><br><span class="line">    &#125;  </span><br><span class="line">    MostUnit();//j</span><br></pre></td></tr></table></figure>
<p>方法二</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var str1 = &quot;jhadfgskjfajhdewqe&quot;;</span><br><span class="line">var result=str1.split(&apos;&apos;).reduce(function(obj,current)&#123;</span><br><span class="line">	if(current in obj)&#123;</span><br><span class="line">		obj[current]++;</span><br><span class="line">	&#125;else&#123;</span><br><span class="line">		obj[current]=1;</span><br><span class="line">	&#125;</span><br><span class="line">	obj.max=obj.max&gt;obj[current]?obj.max:obj[current];</span><br><span class="line">	obj.key=obj.max&gt;obj[current]?obj.key:current;</span><br><span class="line">	return obj;</span><br><span class="line">&#125;,&#123;&#125;);</span><br><span class="line">console.log(result.key,result.max);</span><br></pre></td></tr></table></figure>
<h3 id="字符串回文判断-回文是指把相同的词汇或句子，在下文中调换位置或颠倒过来，产生首尾回环的情趣，叫做回文，也叫回环。"><a href="#字符串回文判断-回文是指把相同的词汇或句子，在下文中调换位置或颠倒过来，产生首尾回环的情趣，叫做回文，也叫回环。" class="headerlink" title="字符串回文判断(回文是指把相同的词汇或句子，在下文中调换位置或颠倒过来，产生首尾回环的情趣，叫做回文，也叫回环。)"></a>字符串回文判断(回文是指把相同的词汇或句子，在下文中调换位置或颠倒过来，产生首尾回环的情趣，叫做回文，也叫回环。)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var str1=&apos;abcdefgh&apos;;</span><br><span class="line">var str1=&apos;abcdcba&apos;;</span><br><span class="line">function plalindrome(str)&#123;</span><br><span class="line">    return str===str.split(&apos;&apos;).reverse().join(&apos;&apos;);</span><br><span class="line">&#125;</span><br><span class="line">console.log(plalindrome(str1)); //false;</span><br><span class="line">console.log(plalindrome(str2)); //true;</span><br></pre></td></tr></table></figure>
<h3 id="不利用第三方变量的情况下交换两个变量的值"><a href="#不利用第三方变量的情况下交换两个变量的值" class="headerlink" title="不利用第三方变量的情况下交换两个变量的值"></a>不利用第三方变量的情况下交换两个变量的值</h3><p>方法一</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var a = 10;  </span><br><span class="line">var b = 12;  </span><br><span class="line">function swap (a,b) &#123;  </span><br><span class="line">    b = b - a;  </span><br><span class="line">    a = a + b;  </span><br><span class="line">    b = a - b;  </span><br><span class="line">    return [a,b]  </span><br><span class="line">&#125;  </span><br><span class="line">console.log(swap(a,b));</span><br></pre></td></tr></table></figure>
<p>方法二</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;a:b,b:a&#125;;</span><br><span class="line">b = a.b;</span><br><span class="line">a = a.a;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.xiaowuzi.info/2018/04/07/排序算法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tony">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小武子博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/07/排序算法/" itemprop="url">排序算法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-07T21:04:08+08:00">
                2018-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h3><h3 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h3><h3 id="快排"><a href="#快排" class="headerlink" title="快排"></a>快排</h3><h3 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.xiaowuzi.info/2018/04/07/web安全——CRSF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tony">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小武子博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/07/web安全——CRSF/" itemprop="url">web安全——CRSF</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-07T21:03:08+08:00">
                2018-04-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.xiaowuzi.info/2018/04/07/web安全——XSS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tony">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小武子博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/07/web安全——XSS/" itemprop="url">web安全——XSS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-07T21:02:58+08:00">
                2018-04-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.xiaowuzi.info/2018/04/07/apply、call和bind理解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tony">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小武子博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/07/apply、call和bind理解/" itemprop="url">apply、call和bind理解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-07T20:51:07+08:00">
                2018-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="apply、call和bind理解"><a href="#apply、call和bind理解" class="headerlink" title="apply、call和bind理解"></a>apply、call和bind理解</h1><p>在JavaScript中，call、apply和bind是Function对象自带的三个方法，这三个方法的主要作用是改变函数中的this指向。</p>
<p><strong>call、apply、bind方法的共同点和区别：</strong></p>
<p>apply、call、bind三都是用来改变函数的this对象的指向的；</p>
<p>apply、call、bind三者第一个参数都是this要指向的对象，也就是想指定的上下文（函数的每次调用都会拥有一个特殊值——本次调用的上下文(context)——这就是this关键字的值。）；</p>
<p>apply 、 call 、bind 三者都可以利用后续参数传参；</p>
<p>bind 是返回对应函数，便于稍后调用；apply 、call 则是立即调用 。</p>
<p>一、call</p>
<p><strong>call()</strong></p>
<p>语法：call([thisObj[,arg1[, arg2[, [,.argN]]]]]) 定义：调用一个对象的一个方法，以另一个对象替换当前对象。</p>
<p>说明： call 方法可以用来代替另一个对象调用一个方法。</p>
<p>call 方法可将一个函数的对象上下文从初始的上下文改变为由 thisObj 指定的新对象。</p>
<p>thisObj的取值有以下4种情况：</p>
<ol>
<li>不传，或者传null,undefined， 函数中的this指向window对象</li>
<li>传递另一个函数的函数名，函数中的this指向这个函数的引用</li>
<li>传递字符串、数值或布尔类型等基础类型，函数中的this指向其对应的包装对象，如 String、Number、Boolean</li>
<li>传递一个对象，函数中的this指向这个对象</li>
</ol>
<p><code>function a(){   
  console.log(this);   //输出函数a中的this对象
}      
function b(){}       
var c={name:&quot;call&quot;};    //定义对象c  
a.call();   //window
a.call(null);   //window
a.call(undefined);   //window
a.call(1);   //Number
a.call(&#39;&#39;);   //String
a.call(true);   //Boolean
a.call(b);   //function b(){}
a.call(c);   //Object</code></p>
<p>如果你不理解上面的，没关系，我们再来看一个例子：</p>
<p><code>function class1(){   
  this.name=function(){   
    console.log(&quot;我是class1内的方法&quot;);   
  }   
}   
function class2(){ 
  class1.call(this); //此行代码执行后，当前的this指向了class1（也可以说class2继承了class1）   
}   
var f=new class2();   
f.name();   //调用的是class1内的方法，将class1的name方法交给class2使用</code></p>
<p>常用例子：</p>
<p><code>function eat(x,y){   
  console.log(x+y);   
}   
function drink(x,y){   
  console.log(x-y);   
}   
eat.call(drink,3,2);
输出：5</code></p>
<p>这个例子中的意思就是用 eat 来替换 drink，eat.call(drink,3,2) == eat(3,2) ，所以运行结果为：console.log(5);</p>
<p>注意：js 中的函数其实是对象，函数名是对 Function 对象的引用。</p>
<p>（2）</p>
<p><code>function Animal(){   
  this.name=&quot;animal&quot;;   
  this.showName=function(){   
    console.log(this.name);   
  }   
}   
function Dog(){   
  this.name=&quot;dog&quot;;   
}   
var animal=new Animal();   
var dog=new Dog();       
animal.showName.call(dog);
输出：dog</code></p>
<p>在上面的代码中，我们可以看到Dog里并没有showName方法，那为什么（this.name）的值是dog呢？</p>
<p>关键就在于最后一段代码（animal.showName.call(dog)），意思是把animal的方法放到dog上执行，也可以说，把animal 的showName()方法放到 dog上来执行，所以this.name 应该是 dog。</p>
<p>（3）继承</p>
<p><code>function Animal(name){   
  this.name=name;   
  this.showName=function(){   
    console.log(this.name);   
  }   
}   
function Dog(name){   
  Animal.call(this,name);   
}   
var dog=new Dog(&quot;Crazy dog&quot;);   
dog.showName();
输出：Crazy dog</code></p>
<p>Animal.call(this) 的意思就是使用 Animal对象代替this对象，那么Dog就能直接调用Animal的所有属性和方法。</p>
<h2 id="二、apply"><a href="#二、apply" class="headerlink" title="二、apply()"></a>二、apply()</h2><p>语法：apply([thisObj[,argArray]])</p>
<p>定义：应用某一对象的一个方法，用另一个对象替换当前对象。</p>
<p>说明：<br>如果 argArray 不是一个有效的数组或者不是 arguments 对象，那么将导致一个 TypeError。<br>如果没有提供 argArray 和 thisObj 任何一个参数，那么 Global 对象将被用作 thisObj， 并且无法被传递任何参数。</p>
<p>call 和 apply的区别<br>对于 apply、call 二者而言，作用完全一样，只是接受参数的方式不太一样。<br><code>function class1(args1,args2){       
  this.name=function(){      
   console.log(args,args);      
  }     
}     
function class2(){    
  var args1=&quot;1&quot;;
  var args2=&quot;2&quot;;
  class1.call(this,args1,args2);  
  /*或*/
  class1.apply(this,[args1,args2]);
}
var c=new class2();   
c.name();
输出：1 2</code></p>
<p>call 需要把参数按顺序传递进去，而 apply 则是把参数放在数组里。</p>
<p>既然两者功能一样，那该用哪个呢？</p>
<p>在JavaScript 中，某个函数的参数数量是不固定的，因此要说适用条件的话，当你的参数是明确知道数量时用 call ；而不确定的时候用 apply，然后把参数 push 进数组传递进去。当参数数量不确定时，函数内部也可以通过 arguments 这个数组来遍历所有的参数。</p>
<h2 id="三、bind"><a href="#三、bind" class="headerlink" title="三、bind"></a>三、bind</h2><p>bind是在EcmaScript5中扩展的方法（IE6,7,8不支持）<br>bind() 方法与 apply 和 call 很相似，也是可以改变函数体内 this 的指向。</p>
<p>　　MDN的解释是：bind()方法会创建一个新函数，称为绑定函数，当调用这个绑定函数时，绑定函数会以创建它时传入 bind()方法的第一个参数作为 this，传入 bind() 方法的第二个以及以后的参数加上绑定函数运行时本身的参数按照顺序作为原函数的参数来调用原函数。</p>
<p>注意：bind方法的返回值是函数</p>
<p><code>var bar=function(){   
  console.log(this.x);   
}
var foo={ 
     x:3   
}   
bar();  
bar.bind(foo)();
 /*或*/
var func=bar.bind(foo);   
func();
输出：
undefined
3</code></p>
<p>参考资料：</p>
<p>1.<a href="http://ghmagical.com/article/page/id/UPLfoGI9vJ91" target="_blank" rel="noopener">JS中的call、apply、bind方法</a></p>
<p>2.<a href="https://qianlongo.github.io/2016/04/26/js%E4%B8%ADcall%E3%80%81apply%E3%80%81bind%E9%82%A3%E4%BA%9B%E4%BA%8B/#more" target="_blank" rel="noopener">js中call、apply、bind那些事
</a></p>
<p>3.<a href="https://juejin.im/post/59019f9fa22b9d0065c51ef8" target="_blank" rel="noopener">巧妙理解 call 和 apply</a></p>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.xiaowuzi.info/2018/04/07/http详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tony">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小武子博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/07/http详解/" itemprop="url">http详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-07T20:45:48+08:00">
                2018-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网络/" itemprop="url" rel="index">
                    <span itemprop="name">网络</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="http的定义和历史"><a href="#http的定义和历史" class="headerlink" title="http的定义和历史"></a><strong>http的定义和历史</strong></h3><p>  HTTP是一个属于应用层的面向对象的协议，由于其简捷、快速的方式，适用于分布式超媒体信息系统。它于1990年提出，经过几年的使用与发展，得到不断地完善和扩展。目前已经经历了四个版本，分别是http0.9，http1.0,http1.1及去年刚发布的http2.0。</p>
<h3 id="http三次握手"><a href="#http三次握手" class="headerlink" title="http三次握手"></a><strong>http三次握手</strong></h3><p>   HTTP是基于传输层的TCP协议，而TCP是一个端到端的面向连接的协议。所谓的端到端可以理解为进程到进程之间的通信.</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/CareySon/201204/201204271057008113.png" alt=""></p>
<h3 id="http的主要特点"><a href="#http的主要特点" class="headerlink" title="http的主要特点"></a><strong>http的主要特点</strong></h3><p>1.支持客户/服务器模式<br>2.简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。<br>3.灵活：http允许传轮任意类型的数据对象。正在传输的类型由Content-Type加以标记。<br>4.无连接：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。</p>
<h3 id="http请求详解"><a href="#http请求详解" class="headerlink" title="http请求详解"></a><strong>http请求详解</strong></h3><p>http请求由三部分组成，分别是：请求行、消息报头、请求正文</p>
<p>http的请求方法：GET POST HEAD PUT DELETE TRACE CONNECT OPTIONS </p>
<p>GET     请求获取Request-URI所标识的资源</p>
<p>POST    在Request-URI所标识的资源后附加新的数据</p>
<p>HEAD    请求获取由Request-URI所标识的资源的响应消息报头</p>
<p>PUT     请求服务器存储一个资源，并用Request-URI作为其标识</p>
<p>DELETE  请求服务器删除Request-URI所标识的资源</p>
<p>TRACE   请求服务器回送收到的请求信息，主要用于测试或诊断</p>
<p>CONNECT 保留将来使用</p>
<p>OPTIONS 请求查询服务器的性能，或者查询与资源相关的选项和需求</p>
<p>HTTP请求由三部分组成：请求行  http头  内容</p>
<p>请求行内容如下：<code>GET www.cnblogs.com HTTP/1.1</code>请求行写法是固定的，由三部分组成，第一部分是请求方法，第二部分是请求网址，第三部分是HTTP版本。｀</p>
<p>第二部分HTTP头在HTTP请求可以是3种HTTP头：1.请求头(request header)  2.普通头(general header)  3.实体头(entity header) 通常来说，由于Get请求往往不包含内容实体，因此也不会有实体头。</p>
<p>第三部分内容只在POST请求中存在，因为GET请求并不包含任何实体。</p>
<p>完整的http请求图如下：</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/CareySon/201204/201204271057105124.png" alt=""></p>
<p>请求报头允许客户端向服务器端传递请求的附加信息以及客户端自身的信息。</p>
<p>Accept请求报头域用于指定客户端接受哪些类型的信息。eg：Accept：image/gif，表明客户端希望接受GIF图象格式的资源；Accept:text/html,表明客户希望接受html文本。</p>
<p>Accept-Charset请求报头域用于指定客户端接受的字符集。eg：Accept-Charset:iso-8859-1,gb2312.如果在请求消息中没有设置这个域，缺省是任何字符集都可以接受。</p>
<p>Accept-Encoding请求报头域类似于Accept，但是它是用于指定可接受的内容编码。eg：Accept-Encoding:gzip.deflate.如果请求消息中没有设置这个域服务器假定客户端对各种内容编码都可以接受。</p>
<p>Accept-Language请求报头域类似于Accept，但是它是用于指定一种自然语言。eg：Accept-Language:zh-cn.如果请求消息中没有设置这个报头域，服务器假定客户端对各种语言都可以接受。</p>
<p>Authorization请求报头域主要用于证明客户端有权查看某个资源。当浏览器访问一个页面时，如果收到服务器的响应代码为401（未授权），可以发送一个包含Authorization请求报头域的请求，要求服务器对其进行验证。</p>
<p>Host请求报头域主要用于指定被请求资源的Internet主机和端口号，它通常从HTTP URL中提取出来的，eg：<br>我们在浏览器中输入：<a href="http://www.guet.edu.cn/index.html" target="_blank" rel="noopener">http://www.guet.edu.cn/index.html</a><br>浏览器发送的请求消息中，就会包含Host请求报头域，如下：<br>Host：<a href="http://www.guet.edu.cn" target="_blank" rel="noopener">www.guet.edu.cn</a><br>此处使用缺省端口号80，若指定了端口号，则变成：Host：<a href="http://www.guet.edu.cn:指定端口号" target="_blank" rel="noopener">www.guet.edu.cn:指定端口号</a></p>
<p>User-Agent<br>我们上网登陆论坛的时候，往往会看到一些欢迎信息，其中列出了你的操作系统的名称和版本，你所使用的浏览器的名称和版本，这往往让很多人感到很神奇，实际上，服务器应用程序就是从User-Agent这个请求报头域中获取到这些信息。User-Agent请求报头域允许客户端将它的操作系统、浏览器和其它属性告诉服务器。不过，这个报头域不是必需的，如果我们自己编写一个浏览器，不使用User-Agent请求报头域，那么服务器端就无法得知我们的信息了。</p>
<h3 id="http响应详解"><a href="#http响应详解" class="headerlink" title="http响应详解"></a><strong>http响应详解</strong></h3><p>当Web服务器收到HTTP请求后，会根据请求的信息做某些处理(这些处理可能仅仅是静态的返回页，或是包含Asp.net,PHP,Jsp等语言进行处理后返回)，相应的返回一个HTTP响应。HTTP响应在结构上很类似于HTTP请求,也是由三部分组成，分别为:状态行  HTTP头  返回内容</p>
<p>状态行内容如：<code>HTTP/1.1 200 OK</code></p>
<p>第一部分是HTTP版本，第二部分是响应状态码，第三部分是状态码的描述，因此也可以把第二和第三部分看成一个部分。</p>
<p>http状态码分别有：</p>
<p>信息类 (100-199)</p>
<p>响应成功 (200-299)：</p>
<p>  200:表示成功</p>
<p>  204:表示服务器接􏰖的请求已成功􏰗理,但在返回的响应报文 中不含实体的主体部分</p>
<p>  206:客户端进行了􏰥围请求,而服务器成功􏰱行了这部分的GET请求</p>
<p>重定向类 (300-399)</p>
<p>  301:􏱔􏱕􏱖永久性重定向。该状态码表示请求的资源已被分配了新的 URI,以 后应使用资源现在所指的 URI。也就是说,如果已经􏱗资源对应的 URI 保存为书􏱆了,这时应该􏱘 Location 首部字段提示的 URI 重新保存。</p>
<p>  302:􏱲临时􏱖重定向。该状态码表示请求的资源已被分配了新的 URI,希 望用户(本􏱳)能使用新的 URI 􏱴问。和 301 Moved Permanently 状态码相􏱶,但 302 状态码代表的资源 不是被􏱔􏱕􏱷动,只是􏱲时􏱖􏱸的。􏱹􏱺􏱻说,已􏱷动的资源对应的 URI 将来还有可能发生改变。􏰚如,用户􏱗 URI 保存成书􏱆,但不会􏱙 301 状态码出现时那样􏱼更新书􏱆,而是仍􏱽保留返回 302 状态码的页 面对应的 URI。</p>
<p>  303:该状态码表示由于请求对应的资源存在着另一个 URI,应使用 GET 方法定向􏲅􏲆请求的资源。</p>
<p>  304:该状态码表示客户端发送􏲡􏲢􏲣件的请求 A 时,服务器端􏰘许请求 􏱴问资源,但未满足􏲣件的􏰞􏰟。304 状态码返回时,不包含􏰙何响应 的主体部分。304 􏲈然被􏲪分在 3􏰶􏰶 􏲫别中,但是和重定向􏲬没有关系。</p>
<p>客户端错误类 (400-499)</p>
<p>  400:该状态码表示请求报文中存在􏳁法􏲸􏲹。当􏲸􏲹发生时,需修改请求 的内容后再􏱳发送请求。另外,浏览器会􏱙 200 OK 一样对待该状态码。</p>
<p>  401:该状态码表示发送的请求需要有通过 HTTP 认证(BASIC 认证、 DIGEST 认证)的认证信􏰝。</p>
<p>  403:该状态码表明对请求资源的􏱴问被服务器􏳖绝了。未􏲅得文件􏲭􏳙的􏱴问授权,􏱴问权􏳚出现某些问题(从未授权的 发送源 IP 地􏳛􏳜图􏱴问)等􏳝举的􏰞􏰟都可能是发生 403 的原因。</p>
<p>  404:该状态码表明服务器上无法􏳧到请求的资源。􏳨此之外,也可以在 服务器端􏳖绝请求且不想说明理由时使用。</p>
<p>服务端错误类 (500-599)</p>
<p>  500:该状态码表明服务器端在􏰱行请求时发生了􏲸􏲹。也有可能是 Web 应用存在的 bug 或某些􏱲时的􏳱􏳲。</p>
<p>  503:该状态码表明服务器􏳺时􏰗于􏳻􏳼􏳽或正在进行停机维􏳾,现在无法􏰗理请求。</p>
<p>第三部分http响应内容就是第三部分HTTP响应内容就是HTTP请求所请求的信息。这个信息可以是一个HTML，也可以是一个图片。</p>
<p> Location: 服务器通过这个头，来告诉浏览器跳到哪里</p>
<p> Server：服务器通过这个头，告诉浏览器服务器的型号</p>
<p> Refresh：服务器通过这个头，告诉浏览器定时刷新</p>
<p> Content-Disposition: 服务器通过这个头，告诉浏览器以下载方式打数据</p>
<p> Transfer-Encoding：服务器通过这个头，告诉浏览器数据是以分块方式回送的</p>
<p> Expires: -1  控制浏览器不要缓存</p>
<p> Cache-Control: no-cache  </p>
<p> Content-Encoding实体报头域被用作媒体类型的修饰符，它的值指示了已经被应用到实体正文的附加内容的编码，因而要获得Content-Type报头域中所引用的媒体类型，必须采用相应的解码机制。Content-Encoding这样用于记录文档的压缩方法，eg：Content-Encoding：gzip</p>
<p> Content-Language实体报头域描述了资源所用的自然语言。没有设置该域则认为实体内容将提供给所有的语言阅读<br>者。eg：Content-Language:da</p>
<p>Content-Length实体报头域用于指明实体正文的长度，以字节方式存储的十进制数字来表示。</p>
<p>Content-Type实体报头域用语指明发送给接收者的实体正文的媒体类型。eg：<br>Content-Type:text/html;charset=ISO-8859-1<br>Content-Type:text/html;charset=GB2312</p>
<p>Last-Modified实体报头域用于指示资源的最后修改日期和时间。</p>
<p>Expires实体报头域给出响应过期的日期和时间。为了让代理服务器或浏览器在一段时间以后更新缓存中(再次访问曾访问过的页面时，直接从缓存中加载，缩短响应时间和降低服务器负载)的页面，我们可以使用Expires实体报头域指定页面过期的时间。eg：Expires：Thu，15 Sep 2006 16:23:12 GMT<br>HTTP1.1的客户端和缓存必须将其他非法的日期格式（包括0）看作已经过期。eg：为了让浏览器不要缓存页面，我们也可以利用Expires实体报头域，设置为0，jsp中程序如下：response.setDateHeader(“Expires”,”0”);</p>
<p>参照资料：</p>
<p><a href="http://www.cnblogs.com/CareySon/archive/2012/04/27/HTTP-Protocol.html" target="_blank" rel="noopener">HTTP协议漫淡</a></p>
<p><a href="http://www.cnblogs.com/li0803/archive/2008/11/03/1324746.html" target="_blank" rel="noopener">http协议详解</a></p>
<p>《图解http》</p>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.xiaowuzi.info/2018/04/02/javascript引擎的执行机制/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tony">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小武子博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/02/javascript引擎的执行机制/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-02T20:10:16+08:00">
                2018-04-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h2><ol>
<li>js为什么是单线程的？为什么需要异步？单线程又是如何实现异步的呢？</li>
<li>js中的event loop(1)</li>
<li>js中的event loop(2)</li>
<li>说说setTimeout</li>
</ol>
<h3 id="一、js为什么是单线程的？为什么需要异步？单线程又是如何实现异步的呢？"><a href="#一、js为什么是单线程的？为什么需要异步？单线程又是如何实现异步的呢？" class="headerlink" title="一、js为什么是单线程的？为什么需要异步？单线程又是如何实现异步的呢？"></a>一、js为什么是单线程的？为什么需要异步？单线程又是如何实现异步的呢？</h3><p>1.1、JS为什么是单线程的？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">JS最初被设计用在浏览器中,那么想象一下,如果浏览器中的JS是多线程的。</span><br><span class="line"></span><br><span class="line">场景描述:</span><br><span class="line"></span><br><span class="line">那么现在有2个进程,process1 process2,由于是多进程的JS,所以他们对同一个dom,同时进行操作</span><br><span class="line"></span><br><span class="line">process1 删除了该dom,而process2 编辑了该dom,同时下达2个矛盾的命令,浏览器究竟该如何执行呢?</span><br></pre></td></tr></table></figure>
<p>这样想,JS为什么被设计成单线程应该就容易理解了吧。</p>
<p>1.2、JS为什么需要异步？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">场景描述:</span><br><span class="line"></span><br><span class="line">如果JS中不存在异步,只能自上而下执行,如果上一行解析时间很长,那么下面的代码就会被阻塞。</span><br><span class="line">对于用户而言,阻塞就意味着&quot;卡死&quot;,这样就导致了很差的用户体验</span><br></pre></td></tr></table></figure>
<p>所以,JS中存在异步执行。</p>
<p>1.3、JS单线程又是如何实现异步的呢?</p>
<p>既然JS是单线程的,只能在一条线程上执行,又是如何实现的异步呢?</p>
<p>是通过的事件循环(event loop),理解了event loop机制,就理解了JS的执行机制</p>
<h3 id="二、js中的event-loop-1"><a href="#二、js中的event-loop-1" class="headerlink" title="二、js中的event loop(1)"></a>二、js中的event loop(1)</h3><p>例1，观察它的执行顺序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">console.log(1)</span><br><span class="line"></span><br><span class="line">setTimeout(function()&#123;</span><br><span class="line">    console.log(2)</span><br><span class="line">&#125;,0)</span><br><span class="line"></span><br><span class="line">console.log(3)</span><br></pre></td></tr></table></figure>
<p>运行结果是: 1 3 2</p>
<p>也就是说,setTimeout里的函数并没有立即执行,而是延迟了一段时间,满足一定条件后,才去执行的,这类代码,我们叫异步代码。</p>
<p>所以,这里我们首先知道了JS里的一种分类方式,就是将任务分为: 同步任务和异步任务</p>
<p>图片描述：<br><img src="https://user-gold-cdn.xitu.io/2018/1/19/1610d76608edbb9b?imageslim" alt="image"></p>
<h4 id="按照这种分类方式-JS的执行机制是"><a href="#按照这种分类方式-JS的执行机制是" class="headerlink" title="按照这种分类方式:JS的执行机制是"></a>按照这种分类方式:JS的执行机制是</h4><ul>
<li>首先判断JS是同步还是异步,同步就进入主进程,异步就进入event table</li>
<li>异步任务在event table中注册函数,当满足触发条件后,被推入event queue</li>
<li>同步任务进入主线程后一直执行,直到主线程空闲时,才会去event queue中查看是否有可执行的异步任务,如果有就推入主进程中</li>
</ul>
<p>以上三步循环执行,这就是event loop</p>
<p>所以上面的例子,你是否可以描述它的执行顺序了呢?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">console.log(1) 是同步任务,放入主线程里</span><br><span class="line">setTimeout() 是异步任务,被放入event table, 0秒之后被推入event queue里</span><br><span class="line">console.log(3 是同步任务,放到主线程里</span><br><span class="line"></span><br><span class="line">当 1、 3在控制条被打印后,主线程去event queue(事件队列)里查看是否有可执行的函数,执行setTimeout里的函数</span><br></pre></td></tr></table></figure>
<h3 id="三、JS中的event-loop-2"><a href="#三、JS中的event-loop-2" class="headerlink" title="三、JS中的event loop(2)"></a>三、JS中的event loop(2)</h3><p>所以,上面关于event loop就是我对JS执行机制的理解,直到我遇到了下面这段代码</p>
<p>例2：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function()&#123;</span><br><span class="line">    console.log(&apos;定时器开始啦&apos;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">new Promise(function(resolve)&#123;</span><br><span class="line">    console.log(&apos;马上执行for循环啦&apos;);</span><br><span class="line">    for(var i = 0; i &lt; 10000; i++)&#123;</span><br><span class="line">        i == 99 &amp;&amp; resolve();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).then(function()&#123;</span><br><span class="line">    console.log(&apos;执行then函数啦&apos;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">console.log(&apos;代码执行结束&apos;);</span><br></pre></td></tr></table></figure>
<p>尝试按照,上文我们刚学到的JS执行机制去分析</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">setTimeout 是异步任务,被放到event table</span><br><span class="line"></span><br><span class="line">new Promise 是同步任务,被放到主进程里,直接执行打印 console.log(&apos;马上执行for循环啦&apos;)</span><br><span class="line"></span><br><span class="line">.then里的函数是 异步任务,被放到event table</span><br><span class="line"> console.log(&apos;代码执行结束&apos;)是同步代码,被放到主进程里,直接执行</span><br></pre></td></tr></table></figure>
<p>所以,结果是 【马上执行for循环啦 — 代码执行结束 — 定时器开始啦 — 执行then函数啦】吗?</p>
<p>亲自执行后,结果居然不是这样,而是【马上执行for循环啦 — 代码执行结束 — 执行then函数啦 — 定时器开始啦】</p>
<p>那么,难道是异步任务的执行顺序,不是前后顺序,而是另有规定? 事实上,按照异步和同步的划分方式,并不准确。</p>
<p>而准确的划分方式是:</p>
<ul>
<li>macro-task(宏任务)：包括整体代码script，setTimeout，setInterval</li>
<li>micro-task(微任务)：Promise，process.nextTick</li>
</ul>
<p><img src="https://segmentfault.com/img/bV1TKz?w=879&amp;h=723" alt=""></p>
<p>按照这种分类方式:JS的执行机制是</p>
<ul>
<li>执行一个宏任务,过程中如果遇到微任务,就将其放到微任务的【事件队列】里</li>
<li>当前宏任务执行完成后,会查看微任务的【事件队列】,并将里面全部的微任务依次执行完</li>
</ul>
<p>重复以上2步骤,结合event loop(1) event loop(2) ,就是更为准确的JS执行机制了。</p>
<p>尝试按照刚学的执行机制,去分析例2:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">首先执行script下的宏任务,遇到setTimeout,将其放到宏任务的【队列】里</span><br><span class="line"></span><br><span class="line">遇到 new Promise直接执行,打印&quot;马上执行for循环啦&quot;</span><br><span class="line"></span><br><span class="line">遇到then方法,是微任务,将其放到微任务的【队列里】</span><br><span class="line"></span><br><span class="line">打印 &quot;代码执行结束&quot;</span><br><span class="line"></span><br><span class="line">本轮宏任务执行完毕,查看本轮的微任务,发现有一个then方法里的函数, 打印&quot;执行then函数啦&quot;</span><br><span class="line"></span><br><span class="line">到此,本轮的event loop 全部完成。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">下一轮的循环里,先执行一个宏任务,发现宏任务的【队列】里有一个 setTimeout里的函数,执行打印&quot;定时器开始啦&quot;</span><br></pre></td></tr></table></figure>
<p>所以最后的执行顺序是【马上执行for循环啦 — 代码执行结束 — 执行then函数啦 — 定时器开始啦】</p>
<p>nodejs执行机制</p>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.xiaowuzi.info/2017/12/11/数据类型、数据类型转换、相等&严格相等/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tony">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小武子博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/11/数据类型、数据类型转换、相等&严格相等/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-11T20:47:27+08:00">
                2017-12-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="数据类型、数据类型转换、相等-amp-严格相等"><a href="#数据类型、数据类型转换、相等-amp-严格相等" class="headerlink" title="数据类型、数据类型转换、相等&amp;严格相等"></a>数据类型、数据类型转换、相等&amp;严格相等</h1><h2 id="数据类型分类"><a href="#数据类型分类" class="headerlink" title="数据类型分类"></a>数据类型分类</h2><p>基本数据类型：String,boolean,Number,Symbol（ES6新增）,Undefined, Null</p>
<p>引用数据类型：Object</p>
<p>基本数据类型中有两个为特殊数据类型： null, undefined</p>
<p>js的常见内置对象：Date,Array,Math,Number,Boolean,String,Array,RegExp,Function…</p>
<h2 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h2><h3 id="隐式转换"><a href="#隐式转换" class="headerlink" title="隐式转换"></a>隐式转换</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">undefined == null;  // true   </span><br><span class="line">1 == true;  // true  </span><br><span class="line">2 == true;  // false  </span><br><span class="line">0 == false;  // true</span><br><span class="line">0 == &apos;&apos;;  // true   </span><br><span class="line">NaN == NaN;  // false  NaN不等于任何值</span><br><span class="line">[] == false;  // true  </span><br><span class="line">[] == ![];  // true</span><br><span class="line">&apos;6&apos; - &apos;3&apos;  // 3</span><br><span class="line">1234 + &apos;abcd&apos; // &quot;1234abcd&quot;</span><br></pre></td></tr></table></figure>
<ol>
<li>undefined与null相等，但不恒等（===）</li>
<li>一个是number一个是string时，会尝试将string转换为number</li>
<li>隐式转换将boolean转换为number，0或1</li>
<li>隐式转换将Object转换成number或string，取决于另外一个对比量的类型</li>
<li>对于0、空字符串的判断，建议使用 “===” 。</li>
<li>“==”会对不同类型值进行类型转换再判断，“===”则不会。它会先判断两边的值类型，类型不匹配时直接为false。</li>
</ol>
<h3 id="显示转换"><a href="#显示转换" class="headerlink" title="显示转换"></a>显示转换</h3><p>显示转换一般指使用Number、String和Boolean三个构造函数，手动将各种类型的值，转换成数字、字符串或者布尔值。</p>
<h4 id="Number："><a href="#Number：" class="headerlink" title="Number："></a>Number：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Number(&apos;1234&apos;) // 1234</span><br><span class="line">Number(&apos;1234abcd&apos;) // NaN</span><br><span class="line">Number(&apos;&apos;) // 0</span><br><span class="line">Number(true) // 1</span><br><span class="line">Number(null) // 0</span><br><span class="line">Number(undefined) // NaN</span><br></pre></td></tr></table></figure>
<h4 id="String："><a href="#String：" class="headerlink" title="String："></a>String：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String(1234)  // &quot;1234&quot;</span><br><span class="line">String(&apos;abcd&apos;)  // &quot;abcd&quot;</span><br><span class="line">String(true)  // &quot;true&quot;</span><br><span class="line">String(undefined) // &quot;undefined&quot;</span><br><span class="line">String(null)  // &quot;null&quot;</span><br></pre></td></tr></table></figure>
<h4 id="Boolean"><a href="#Boolean" class="headerlink" title="Boolean:"></a>Boolean:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Boolean(0)  // false</span><br><span class="line">Boolean(undefined)  // false</span><br><span class="line">Boolean(null)  // false</span><br><span class="line">Boolean(NaN)  // false</span><br><span class="line">Boolean(&apos;&apos;)  // false</span><br></pre></td></tr></table></figure>
<p>Number、String、Boolean转换对象时主要使用了对象内部的valueOf和toString方法进行转换。</p>
<h4 id="Number转换对象："><a href="#Number转换对象：" class="headerlink" title="Number转换对象："></a>Number转换对象：</h4><ol>
<li>先调用对象自身的valueOf方法。如果返回原始类型的值，则直接对该值使用Number函数，返回结果。</li>
<li>如果valueOf返回的还是对象，继续调用对象自身的toString方法。如果toString返回原始类型的值，则对该值使用Number函数，返回结果。</li>
<li>如果toString返回的还是对象，报错。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Number([1]); //1</span><br><span class="line">转换演变：</span><br><span class="line">[1].valueOf(); // [1];</span><br><span class="line">[1].toString(); // &apos;1&apos;;</span><br><span class="line">Number(&apos;1&apos;); //1</span><br></pre></td></tr></table></figure>
<h4 id="String转换对象"><a href="#String转换对象" class="headerlink" title="String转换对象"></a>String转换对象</h4><ol>
<li>先调用对象自身的toString方法。如果返回原始类型的值，则对该值使用String函数，返回结果。</li>
<li>如果toString返回的是对象，继续调用valueOf方法。如果valueOf返回原始类型的值，则对该值使用String函数，返回结果。</li>
<li>如果valueOf返回的还是对象，报错。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String([1,2]) //&quot;1,2&quot;</span><br><span class="line">转化演变：</span><br><span class="line">[1,2].toString();  //&quot;1,2&quot;</span><br><span class="line">String(&quot;1,2&quot;);  //&quot;1,2&quot;</span><br></pre></td></tr></table></figure>
<h4 id="Boolean转换对象"><a href="#Boolean转换对象" class="headerlink" title="Boolean转换对象"></a>Boolean转换对象</h4><p>Boolean转换对象很特别，除了以下六个值转换为false，其他都为true</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">undefined  null  false  0(包括+0和-0)  NaN  空字符串(&apos;&apos;)</span><br><span class="line">Boolean(undefined)   //false</span><br><span class="line">Boolean(null)        //false</span><br><span class="line">Boolean(false)       //false</span><br><span class="line">Boolean(0)           //false</span><br><span class="line">Boolean(NaN)         //false</span><br><span class="line">Boolean(&apos;&apos;)          //false</span><br><span class="line"></span><br><span class="line">Boolean([])          //true</span><br><span class="line">Boolean(&#123;&#125;)          //true</span><br><span class="line">Boolean(new Date())  //true</span><br></pre></td></tr></table></figure>
<h3 id="严格相等运算符和相等运算符的区别："><a href="#严格相等运算符和相等运算符的区别：" class="headerlink" title="严格相等运算符和相等运算符的区别："></a>严格相等运算符和相等运算符的区别：</h3><p>==相等运算符比较两个值的时候会判断两个值的类型，如果不是同一类型，会强制转换为同一类型进行比较。</p>
<p>而===比较两个值的时候先判断两个值的类型，如果不是同一类型，直接返回false，值类型相同再进行值的比较。</p>
<p>所以，从性能上来说，==会比===多走一条类型转换的路，稍逊一点。从结果上来说，有时候类型转换会给你带来你不想要的比较结果。 这也就是为什么都推崇使用===的原因。当然，==在合适的业务场景下使用也是必要的。</p>
<h3 id="相等运算符"><a href="#相等运算符" class="headerlink" title="相等运算符=="></a>相等运算符==</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">规则： </span><br><span class="line"></span><br><span class="line">if 相等运算符比较相同类型的数据时，同严格相等运算符</span><br><span class="line">else if 相等运算符比较不同类型的数据时：</span><br><span class="line">原始类型的数据会转换成数值类型，把字符串和布尔值都转为数值，再进行比较</span><br><span class="line">null == undefined  返回true</span><br><span class="line">一个是对象，另一个是数字或者字符串，把对象转成基本类型值再比较</span><br><span class="line">else false</span><br><span class="line"></span><br><span class="line">123 == 123; //true</span><br><span class="line">&apos;123&apos; == 123; //true，&apos;123&apos;会转成成数值123</span><br><span class="line">false == 0; //true，false 转成数值就是0</span><br><span class="line">&apos;a&apos; == &apos;A&apos;; //false，转换后的编码不一样</span><br><span class="line">123 == &#123;&#125;; //false，执行toString()或valueOf()会改变</span><br><span class="line">123 == NaN; //false，只要有NaN，都是false</span><br><span class="line">&#123;&#125; == &#123;&#125;; //false，比较的是他们的地址，每个新创建对象的引用地址都不同</span><br><span class="line"></span><br><span class="line">null == undefined //true</span><br><span class="line">&apos;NaN&apos; == NaN //false</span><br><span class="line">123 == NaN //false</span><br><span class="line">NaN == NaN //false</span><br><span class="line">false == 0 //true</span><br><span class="line">true == 1 //true</span><br><span class="line">true == 2 //false</span><br><span class="line">undefined == 0 //false</span><br><span class="line">null == 0 //false</span><br><span class="line">&apos;123&apos; == 123 //true</span><br><span class="line">&apos;123&apos; === 123 //false</span><br></pre></td></tr></table></figure>
<h3 id="判断"><a href="#判断" class="headerlink" title="!!判断"></a>!!判断</h3><p>!!相当于Boolean，写代码时用!!转化为Boolean类型做判断非常好用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">!!&apos;xzavier&apos;;   // true</span><br><span class="line">!!&apos;&apos;;          // false</span><br><span class="line">!!&apos;0&apos;;         // true</span><br><span class="line">!!&apos;1&apos;;         // true</span><br><span class="line">!!&apos;-1&apos;         // true</span><br><span class="line">!!0            // false</span><br><span class="line">!!undefined    // false</span><br><span class="line">!!null         // false</span><br><span class="line">!!NaN          // false</span><br><span class="line">!!&#123;&#125;;          // true</span><br><span class="line">!!&#123;name:&apos;xz&apos;&#125;  // true</span><br><span class="line">!![];          // true</span><br><span class="line">!![1,2,3];     // true</span><br><span class="line">!!true;        // true</span><br></pre></td></tr></table></figure>
<h3 id="判断-1"><a href="#判断-1" class="headerlink" title="!判断"></a>!判断</h3><p>取反运算符 ! 用于将布尔值变为相反值，即true变成false，false变成true。对于非布尔值的数据，取反运算符会自动将其转为布尔值。规则是，以下六个值取反后为true，其他值取反后都为false</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">undefined  null  false  0(包括+0和-0)  NaN  空字符串(&apos;&apos;)</span><br><span class="line"></span><br><span class="line">!undefined    // true</span><br><span class="line">!null         // true</span><br><span class="line">!false        // true</span><br><span class="line">!0            // true</span><br><span class="line">!NaN          // true</span><br><span class="line">!&quot;&quot;           // true    </span><br><span class="line">!54           // false</span><br><span class="line">!&apos;hello&apos;      // false</span><br><span class="line">![]           // false</span><br><span class="line">![1,2,3]      // false</span><br><span class="line">!&#123;&#125;           // false</span><br><span class="line">!&#123;name:&apos;xz&apos;&#125;  // false</span><br></pre></td></tr></table></figure>
<h3 id="和-判断"><a href="#和-判断" class="headerlink" title="[]和{}判断"></a>[]和{}判断</h3><p>对于[]和{}，我们在业务代码中肯定会对其做判断，如上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">!!&#123;&#125;;          // true</span><br><span class="line">!!&#123;name:&apos;xz&apos;&#125;  // true</span><br><span class="line">!![];          // true</span><br><span class="line">!![1,2,3];     // true</span><br></pre></td></tr></table></figure>
<p>不能用!!和!做判断，对于数组，我们用它的length属性做判断</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[].length       // 0 false</span><br><span class="line">[1,2,3].length  // 3 true</span><br></pre></td></tr></table></figure>
<p>参考资料：</p>
<p><a href="https://segmentfault.com/a/1190000006672446" target="_blank" rel="noopener">相等==&amp;严格相等===&amp;代码里的那些判断</a></p>
<p><a href="https://segmentfault.com/a/1190000005863067" target="_blank" rel="noopener">基本数据类型和引用数据类型判断&amp;存储访问&amp;类型转换</a></p>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.xiaowuzi.info/2017/12/11/加法运算符/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tony">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小武子博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/11/加法运算符/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-11T18:05:16+08:00">
                2017-12-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="加法运算符"><a href="#加法运算符" class="headerlink" title="加法运算符"></a>加法运算符</h1><h2 id="本职工作：加法运算符"><a href="#本职工作：加法运算符" class="headerlink" title="本职工作：加法运算符"></a>本职工作：加法运算符</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var result = 10 + 5;  </span><br><span class="line">// number + number = number (addition)</span><br><span class="line">// 15</span><br></pre></td></tr></table></figure>
<h2 id="胜任工作：连接字符串"><a href="#胜任工作：连接字符串" class="headerlink" title="胜任工作：连接字符串"></a>胜任工作：连接字符串</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var result = &quot;Hello, &quot; + &quot;World!&quot;;  </span><br><span class="line">// string + string = string (concatenation)</span><br><span class="line">// &quot;Hello, World!&quot;</span><br></pre></td></tr></table></figure>
<p>JavaScript允许我们在object、array、null or undefined上使用操作符。那我们来看看使用的规则和细节。</p>
<h2 id="转换规则"><a href="#转换规则" class="headerlink" title="转换规则"></a>转换规则</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">operand + operand = result</span><br></pre></td></tr></table></figure>
<ul>
<li>如果操作数中有一个是对象，它会被转换为原始值(string、number or boolean)</li>
<li>如果操作数中有一个是字符串，第二个操作数将转换成字符串，并且连接在一起转换为字符串</li>
<li>在其它情况之下，两个操作数转换为数字并执行加法运算</li>
</ul>
<p>如果两个运算数是原始类型，则检查如果至少一个操作数是字符串的话，就把它们当字符串连接。在其他情况下，它会把他们都当数字，然后转化为数字相加的总和。</p>
<h2 id="对象转换规则"><a href="#对象转换规则" class="headerlink" title="对象转换规则"></a>对象转换规则</h2><ul>
<li>如果对象类型是一个Date，使用toString()方法</li>
<li>在其它情况下使用valueOf()方法，返回一个原始值</li>
<li>如果valueOf()方法不能返回一个原始值，使用toString()方法。大多情况都会发生这种情况</li>
</ul>
<p>当一个数组被转换为原始值，JavaScript会使用join(‘,’)方法，例如[1,5,6]的原始值是”1,5,6”。一个普通的JavaScript对象{}的原始值是”[object Object]”</p>
<h2 id="Example-1-数字和字符串"><a href="#Example-1-数字和字符串" class="headerlink" title="Example 1: 数字和字符串"></a>Example 1: 数字和字符串</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var result = 1 + &quot;5&quot;; // &quot;15&quot;</span><br></pre></td></tr></table></figure>
<p>解释：</p>
<ul>
<li>1 + “5” （第二个操作数是一个字符串，那么数字1将会变成字符串”1”）</li>
<li>“1” + “5” （连接字符串）</li>
<li>“15”</li>
</ul>
<p>第二个操作数是一个字符串,第一个操作数把number转换成string类型，然后将它们连接在一起。</p>
<h2 id="Example-2-数字和数组"><a href="#Example-2-数字和数组" class="headerlink" title="Example 2:数字和数组"></a>Example 2:数字和数组</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var result = [1, 3, 5] + 1; //&quot;1,3,51&quot;</span><br></pre></td></tr></table></figure>
<p>解释：</p>
<ul>
<li>[1,3,5] + 1 （数组[1,3,5]转换为原始值为”1,3,5”）</li>
<li>“1,3,5” + 1 （数字1转换成字符串”1”）</li>
<li>“1,3,5” + “1” （连接字符串）</li>
<li>“1,3,51”</li>
</ul>
<p>第一个操作数是数组，转换为原始值字符串，第二个操作数是数字，转换为字符串，然后两个字符串连接在一起。</p>
<h2 id="Example-3-数字和布尔值"><a href="#Example-3-数字和布尔值" class="headerlink" title="Example 3:数字和布尔值"></a>Example 3:数字和布尔值</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var result = 10 + true; //11</span><br></pre></td></tr></table></figure>
<p>解释：</p>
<ul>
<li>10 + true （布尔值true将转换为数字1）</li>
<li>10 + 1 （数字做加法运算）</li>
<li>11</li>
</ul>
<p>因为两个操作数都不是字符串，布尔值将转换为数字符，然后作数字加法运算。</p>
<h2 id="Example-4-数字和对象"><a href="#Example-4-数字和对象" class="headerlink" title="Example 4: 数字和对象"></a>Example 4: 数字和对象</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var result = 15 + &#123;&#125;; // &quot;15[object Object]&quot;</span><br></pre></td></tr></table></figure>
<p>解释：</p>
<ul>
<li>15 + {} （第二个操作数是一个对象，对象转换为字符串”[object Object]”）</li>
<li>15 + “[object Object]” （数字15转换为字符串”15”）</li>
<li>“15” + “[object Object]” （连接字符串）</li>
<li>“15[object Object]”</li>
</ul>
<p>第二个操作数是一个对象，转换为原始值字符串。因为valueOf()方法返回的是对象本身，而不是一个原始值，所以再使用toString()方法，返回一个字符串。</p>
<p>第二个操作数转换之后是一个字符串，故数字也将转换为一个字符串，再把字符串连接在一起。</p>
<h2 id="Example-5-数字和null"><a href="#Example-5-数字和null" class="headerlink" title="Example 5:数字和null"></a>Example 5:数字和null</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var result = 8 + null; // 8</span><br></pre></td></tr></table></figure>
<p>解释：</p>
<ul>
<li>8 + null（因为操作数没有字符串，null将转换为数字0）</li>
<li>8 + 0 （两个数字做加法运算）</li>
<li>8</li>
</ul>
<p>如果操作数不是对象或字符串时，null会转换为数字，然后做数字加法运算。</p>
<h2 id="Example-6-字符串和null"><a href="#Example-6-字符串和null" class="headerlink" title="Example 6:字符串和null"></a>Example 6:字符串和null</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var result = &quot;queen&quot; + null; // &quot;queennull&quot;</span><br></pre></td></tr></table></figure>
<p>解释：</p>
<ul>
<li>“queen” + null （因为第一个操作数是一个字符串，null将转换为一个字符串”null”）</li>
<li>“queen” + “null” （连接字符串）</li>
<li>“queennull”</li>
</ul>
<p>因为第一个操作数是一个字符串，所以null将转换为一个字符串”null”，然后两个把字符串连接在一起。</p>
<h2 id="Example-7-数字和undefined"><a href="#Example-7-数字和undefined" class="headerlink" title="Example 7: 数字和undefined"></a>Example 7: 数字和undefined</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var result = 12 + undefined; // NaN</span><br></pre></td></tr></table></figure>
<p>解释：</p>
<ul>
<li>12 + undefined （因为没有任何一个操作数是字符串，undefined将转换为一个数字NaN）</li>
<li>12 + NaN （做数字加法运算）</li>
<li>NaN</li>
</ul>
<p>因为没有操作数是对象或字符串，undefined将转换为NaN。两个数字做加法运算，之所以要做加法，是因为typeof(NaN) == “number”，又因为任何一个数字和NaN做加法运算，所以等于NaN。</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>以避免潜在的问题，不使用加法运算符处理对象，除非你清楚地使用toString()或valueOf()方法。</p>
<p>如在实例中看到的，开发中要明确场景的转换规则，以防JavaScript给你带来的惊喜哦。</p>
<p>参考资料：</p>
<p>详解加法运算符<a href="https://segmentfault.com/a/1190000007184573" target="_blank" rel="noopener"></a></p>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.xiaowuzi.info/2017/11/27/闭包/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tony">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小武子博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/27/闭包/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-27T10:24:46+08:00">
                2017-11-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h1><h2 id="闭包的特性"><a href="#闭包的特性" class="headerlink" title="闭包的特性"></a>闭包的特性</h2><ol>
<li>函数嵌套函数</li>
<li>函数内部可以引用外部的参数和变量</li>
<li>参数和变量不会被垃圾回收制回收</li>
</ol>
<h2 id="闭包的定义及其优缺点"><a href="#闭包的定义及其优缺点" class="headerlink" title="闭包的定义及其优缺点"></a>闭包的定义及其优缺点</h2><p>闭包 是指有权访问另一个函数作用域中的变量的函数，创建闭包的最常见的方式就是在一个函数内创建另一个函数，通过另一个函数访问这个函数的局部变量</p>
<p>闭包的缺点就是常驻内存，会增大内存使用量，使用不当很容易造成内存泄露。</p>
<p>闭包是javascript语言的一大特点，主要应用闭包场合主要是为了：设计私有的方法和变量。</p>
<p>一般函数执行完毕后，局部活动对象就被销毁，内存中仅仅保存全局作用域。但闭包的情况不同！</p>
<h2 id="嵌套函数的闭包"><a href="#嵌套函数的闭包" class="headerlink" title="嵌套函数的闭包"></a>嵌套函数的闭包</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function aaa() &#123;  </span><br><span class="line">  var a = 1;  </span><br><span class="line">  return function()&#123;</span><br><span class="line">   alert(a++)</span><br><span class="line">  &#125;;  </span><br><span class="line">&#125;         </span><br><span class="line">var fun = aaa();  </span><br><span class="line">fun();// 1 执行后 a++，，然后a还在~  </span><br><span class="line">fun();// 2   </span><br><span class="line">fun = null;//a被回收！！</span><br></pre></td></tr></table></figure>
<p>闭包会使变量始终保存在内存中，如果不当使用会增大内存消耗。</p>
<h2 id="javascript的垃圾回收原理"><a href="#javascript的垃圾回收原理" class="headerlink" title="javascript的垃圾回收原理"></a>javascript的垃圾回收原理</h2><ol>
<li>在javascript中，如果一个对象不再被引用，那么这个对象就会被GC回收； </li>
<li>如果两个对象互相引用，而不再被第3者所引用，那么这两个互相引用的对象也会被回收。</li>
</ol>
<h2 id="使用闭包的好处"><a href="#使用闭包的好处" class="headerlink" title="使用闭包的好处"></a>使用闭包的好处</h2><p>那么使用闭包有什么好处呢？使用闭包的好处是：</p>
<ol>
<li>希望一个变量长期驻扎在内存中</li>
<li>避免全局变量的污染</li>
<li>私有成员的存在</li>
</ol>
<h2 id="一、全局变量的累加"><a href="#一、全局变量的累加" class="headerlink" title="一、全局变量的累加"></a>一、全局变量的累加</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">var a = 1;</span><br><span class="line">function abc()&#123;</span><br><span class="line">        a++;</span><br><span class="line">        alert(a);</span><br><span class="line">&#125;</span><br><span class="line">abc();              //2</span><br><span class="line">abc();            //3</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="二、局部变量"><a href="#二、局部变量" class="headerlink" title="二、局部变量"></a>二、局部变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">function abc()&#123;</span><br><span class="line">        var a = 1;</span><br><span class="line">        a++;</span><br><span class="line">        alert(a);</span><br><span class="line">&#125;</span><br><span class="line">abc();                       //2</span><br><span class="line">abc();                    //2</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="三、局部变量的累加"><a href="#三、局部变量的累加" class="headerlink" title="三、局部变量的累加"></a>三、局部变量的累加</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">function outer()&#123;</span><br><span class="line">        var x=10;</span><br><span class="line">        return function()&#123;             //函数嵌套函数</span><br><span class="line">                x++;</span><br><span class="line">                alert(x);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">var y = outer();              //外部函数赋给变量y;</span><br><span class="line">y();                 //y函数调用一次，结果为11，相当于outer()()；</span><br><span class="line">y();                //y函数调用第二次，结果为12，实现了累加</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="函数声明与函数表达式"><a href="#函数声明与函数表达式" class="headerlink" title="函数声明与函数表达式"></a>函数声明与函数表达式</h2><p>在js中我们可以通过关键字function来声明一个函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">function abc()&#123;</span><br><span class="line">        alert(123);</span><br><span class="line">&#125;</span><br><span class="line">abc();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>我们也可以通过一个”()”来将这个声明变成一个表达式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">(function ()&#123;</span><br><span class="line">        alert(123);</span><br><span class="line">&#125;)();                   //然后通过()直接调用前面的表达式即可，因此函数可以不必写名字；</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="四、模块化代码，减少全局变量的污染"><a href="#四、模块化代码，减少全局变量的污染" class="headerlink" title="四、模块化代码，减少全局变量的污染"></a>四、模块化代码，减少全局变量的污染</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">var abc = (function()&#123;      //abc为外部匿名函数的返回值</span><br><span class="line">        var a = 1;</span><br><span class="line">        return function()&#123;</span><br><span class="line">                a++;</span><br><span class="line">                alert(a);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;)();</span><br><span class="line">abc();    //2 ；调用一次abc函数，其实是调用里面内部函数的返回值    </span><br><span class="line">abc();    //3</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="五、私有成员的存在"><a href="#五、私有成员的存在" class="headerlink" title="五、私有成员的存在"></a>五、私有成员的存在</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">var aaa = (function()&#123;</span><br><span class="line">    var a = 1;</span><br><span class="line">    function bbb()&#123;</span><br><span class="line">            a++;</span><br><span class="line">            alert(a);</span><br><span class="line">    &#125;</span><br><span class="line">    function ccc()&#123;</span><br><span class="line">            a++;</span><br><span class="line">            alert(a);</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">            b:bbb,             //json结构</span><br><span class="line">            c:ccc</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line">aaa.b();     //2</span><br><span class="line">aaa.c()      //3</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="六-使用匿名函数实现累加"><a href="#六-使用匿名函数实现累加" class="headerlink" title="六.使用匿名函数实现累加"></a>六.使用匿名函数实现累加</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//使用匿名函数实现局部变量驻留内存中，从而实现累加</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line"> function box()&#123;</span><br><span class="line">     var age = 100;</span><br><span class="line">     return function()&#123;          //匿名函数</span><br><span class="line">          age++;</span><br><span class="line">          return age;</span><br><span class="line">     &#125;;</span><br><span class="line"> &#125; </span><br><span class="line">var b = box();</span><br><span class="line">alert(b());</span><br><span class="line">alert(b());    //即alert(box()())；</span><br><span class="line">alert(b());</span><br><span class="line">alert(b);            //     function () &#123;</span><br><span class="line">                        //   age++;</span><br><span class="line">                       // return age;</span><br><span class="line">                      //       &#125;</span><br><span class="line">b = null；  //解除引用，等待垃圾回收</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>过度使用闭包会导致性能的下降。函数里放匿名函数，则产生了闭包</p>
<h2 id="七、在循环中直接找到对应元素的索引"><a href="#七、在循环中直接找到对应元素的索引" class="headerlink" title="七、在循环中直接找到对应元素的索引"></a>七、在循环中直接找到对应元素的索引</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; </span><br><span class="line">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span><br><span class="line">    &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot;&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">            &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=UTF-8&quot; /&gt;</span><br><span class="line">            &lt;title&gt;&lt;/title&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    window.onload = function()&#123;</span><br><span class="line">            var aLi = document.getElementsByTagName(&apos;li&apos;);</span><br><span class="line">            for (var i=0;i&lt;aLi.length;i++)&#123;</span><br><span class="line">                    aLi[i].onclick = function()&#123;        //当点击时for循环已经结束</span><br><span class="line">                    alert(i);</span><br><span class="line">                    &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;/script&gt;        </span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">                    &lt;li&gt;123&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;456&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;789&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;010&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">    &lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="八、使用闭包改写上面代码"><a href="#八、使用闭包改写上面代码" class="headerlink" title="八、使用闭包改写上面代码"></a>八、使用闭包改写上面代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; </span><br><span class="line">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span><br><span class="line">    &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot;&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">            &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=UTF-8&quot; /&gt;</span><br><span class="line">            &lt;title&gt;&lt;/title&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    window.onload = function()&#123;</span><br><span class="line">            var aLi = document.getElementsByTagName(&apos;li&apos;);</span><br><span class="line">            for (var i=0;i&lt;aLi.length;i++)&#123;</span><br><span class="line">                    (function(i)&#123;</span><br><span class="line">                            aLi[i].onclick = function()&#123;</span><br><span class="line">                                    alert(i);</span><br><span class="line">                            &#125;;</span><br><span class="line">                    &#125;)(i);</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">    &lt;/script&gt;  </span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">                    &lt;li&gt;123&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;456&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;789&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">    &lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="九-内存泄露问题"><a href="#九-内存泄露问题" class="headerlink" title="九.内存泄露问题"></a>九.内存泄露问题</h2><p>由于IE的js对象和DOM对象使用不同的垃圾收集方法，因此闭包在IE中会导致内存泄露问题，也就是无法销毁驻留在内存中的元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function closure()&#123;</span><br><span class="line">    var oDiv = document.getElementById(&apos;oDiv&apos;);//oDiv用完之后一直驻留在内存中</span><br><span class="line">    oDiv.onclick = function () &#123;</span><br><span class="line">        alert(&apos;oDiv.innerHTML&apos;);//这里用oDiv导致内存泄露</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">closure();</span><br><span class="line">//最后应将oDiv解除引用来避免内存泄露</span><br><span class="line">function closure()&#123;</span><br><span class="line">    var oDiv = document.getElementById(&apos;oDiv&apos;);</span><br><span class="line">    var test = oDiv.innerHTML;</span><br><span class="line">    oDiv.onclick = function () &#123;</span><br><span class="line">        alert(test);</span><br><span class="line">    &#125;;</span><br><span class="line">    oDiv = null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参考资料：</p>
<p><a href="https://segmentfault.com/a/1190000000652891" target="_blank" rel="noopener">详解js闭包</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html" target="_blank" rel="noopener">学习Javascript闭包</a></p>
<p><a href="http://www.cnblogs.com/pp-cat/p/4384610.html" target="_blank" rel="noopener">javascript闭包的理解</a></p>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Tony</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">24</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tony</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  



  
  









  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>